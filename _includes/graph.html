<div class='graph' id='{{question.key}}'>
  {% assign total = data[question.key]['All'].total %}
  {% if data[question.key]['All'] %}
  {% if group.answers %}
    {% for answer in group.answers %}
      {% capture class %}{{answer | downcase | remove:"'" | replace:' ','-'}}{% endcapture %}
      {% capture pct %}{{data[question.key]['All'][answer] | times:1000 | divided_by:total | times:0.1}}{% endcapture %}
      <a class='{{class}}' style='width:{{pct}}%;' {% include scope.json %}><em>
        <b>{{answer}}</b>
        <i>{{pct}}% &mdash; {{data[question.key]['All'][answer]}} respondents</i>
      </em></a>
      {% if forloop.last %}<a class='fill {{class}}'></a>{% endif %}
    {% endfor %}
  {% else %}
    {% for i in data[question.key]['All'] %}{% if i[0] != 'total' %}
      {% assign answer = i[0] %}
      {% capture class %}{{answer | downcase | remove:"'" | replace:' ','-'}}{% endcapture %}
      {% capture pct %}{{data[question.key]['All'][answer] | times:1000 | divided_by:total | times:0.1}}{% endcapture %}
      <a class='{{class}} autogen autogen-{{forloop.index}}' style='width:{{pct}}%;' {% include scope.json %}><em>
        <b>{{answer}}</b>
        <i>{{pct}}% &mdash; {{data[question.key]['All'][answer]}} respondents</i>
      </em></a>
      {% if forloop.last %}<a class='fill {{class}}'></a>{% endif %}
    {% endif %}{% endfor %}
  {% endif %}
  {% endif %}
  <a class='fill empty {% if data[question.key]['All'] %}hidden{% endif %}'>No data available</a>
</div>
